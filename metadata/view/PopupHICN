{
    "type": "Ext.window.Window",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userAlias": "HICN",
        "designer|userClassName": "PopupHICN",
        "height": 380,
        "hidden": false,
        "hideShadowOnDeactivate": true,
        "id": "POPHICN",
        "itemId": "mywindow",
        "modal": true,
        "title": "New Patient /  HICN",
        "width": 665
    },
    "designerId": "da43420e-3120-458f-9a6a-f65332f0d93f",
    "cn": [
        {
            "type": "Ext.form.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "bodyPadding": 10,
                "bodyStyle": [
                    "background-color:#a5cfff;"
                ],
                "height": null,
                "id": "patientPopForm1",
                "layout": "auto",
                "maxWidth": null,
                "title": "",
                "titleAlign": "center",
                "width": null
            },
            "designerId": "f52b2148-a154-47cf-990c-055547f42b16",
            "cn": [
                {
                    "type": "Ext.form.FieldSet",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "style": [
                            "border-style:solid;\r",
                            "border-color:#000000;"
                        ],
                        "title": "<font size=\"4\">New Patient /  HICN</font>",
                        "width": 633
                    },
                    "designerId": "cd08e264-ec9d-4318-af08-c4f1a834b0c3",
                    "cn": [
                        {
                            "type": "Ext.container.Container",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "itemId": "HICN",
                                "margin": "7 0 7 0"
                            },
                            "designerId": "b82cea53-0c6b-4703-ae0c-1397902ca9f4",
                            "cn": [
                                {
                                    "type": "Ext.form.field.Text",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "allowBlank": false,
                                        "enforceMaxLength": true,
                                        "fieldLabel": "<b>HICN&nbsp;<span style=\"color:#D94E37;\">*</span><b/>",
                                        "inputId": "txtPOPHICN",
                                        "itemId": "txtPOPHICN",
                                        "maxLength": 11,
                                        "vtype": "alphanum",
                                        "width": 300
                                    },
                                    "designerId": "931acb87-60ba-4cc8-b3f0-0a114e1c05c9"
                                }
                            ]
                        },
                        {
                            "type": "Ext.container.Container",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "container|align": "stretch",
                                "itemId": "Name",
                                "layout": "hbox",
                                "margin": "7 0 7 0"
                            },
                            "designerId": "d1da3dae-cb7a-47b1-a0a1-004ada1c0272",
                            "cn": [
                                {
                                    "type": "Ext.form.field.Text",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "allowBlank": false,
                                        "fieldLabel": "<b>First Name&nbsp;<span style=\"color:#D94E37;\">*</span><b/>",
                                        "inputId": "txtPOPFname",
                                        "itemId": "txtPOPFname",
                                        "msgTarget": "side",
                                        "regex": "/^[a-zA-Z ]*$/",
                                        "regexText": "Please enter valid First name",
                                        "vtype": null,
                                        "width": 300
                                    },
                                    "designerId": "1a3bde3b-6cd6-4fbf-a557-ccdad6687f26"
                                },
                                {
                                    "type": "Ext.form.field.Text",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fieldLabel": "<b>&nbsp;&nbsp;&nbsp;Middle Name</b>",
                                        "inputId": "txtPOPMname",
                                        "itemId": "txtPOPMname",
                                        "layout|flex": 0,
                                        "msgTarget": "side",
                                        "regex": "/^[a-zA-Z ]*$/",
                                        "regexText": "Please enter valid Middle name",
                                        "vtype": null,
                                        "width": 300
                                    },
                                    "designerId": "cfc66f5f-29dd-4ed7-b26c-8187da4b5709"
                                }
                            ]
                        },
                        {
                            "type": "Ext.container.Container",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "itemId": "Name1",
                                "margin": "7 0 7 0"
                            },
                            "designerId": "2bec1e97-bf21-40e9-9f55-35cc7d5824ee",
                            "cn": [
                                {
                                    "type": "Ext.form.field.Text",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "allowBlank": false,
                                        "fieldLabel": "<b>Last Name&nbsp;<span style=\"color:#D94E37;\">*</span></b>",
                                        "inputId": "txtPOPLname",
                                        "itemId": "txtPOPLname",
                                        "msgTarget": "side",
                                        "regex": "/^[a-zA-Z ]*$/",
                                        "regexText": "Please enter valid Last name",
                                        "vtype": null,
                                        "width": 300
                                    },
                                    "designerId": "acca43a6-326f-4138-9472-2f3b464418c4"
                                }
                            ]
                        },
                        {
                            "type": "Ext.container.Container",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "container|align": "stretch",
                                "itemId": "DOBSex",
                                "layout": "hbox",
                                "margin": "7 0 7 0"
                            },
                            "designerId": "bb5a88b8-f3c9-4bc3-b3eb-d163e6b708a0",
                            "cn": [
                                {
                                    "type": "Ext.form.field.Date",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "allowBlank": false,
                                        "emptyText": "mm-dd-yyyy",
                                        "fieldLabel": "<b>DOB&nbsp;<span style=\"color:#D94E37;\">*</span></b>",
                                        "format": "m-d-Y",
                                        "id": "txtPOPDOBID",
                                        "inputId": "txtPOPDOB",
                                        "itemId": "txtPOPDOB",
                                        "width": 300
                                    },
                                    "designerId": "2eb07398-87ad-4b0c-a1fb-5a100c992dd6"
                                },
                                {
                                    "type": "Ext.form.field.ComboBox",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "allowBlank": false,
                                        "displayField": "des",
                                        "editable": false,
                                        "emptyText": "-Select-",
                                        "fieldLabel": "<b>&nbsp;&nbsp;&nbsp;Sex&nbsp;<span style=\"color:#D94E37;\">*</span></b>",
                                        "forceSelection": true,
                                        "inputId": "ddlPOPSex",
                                        "itemId": "txtPOPSex",
                                        "msgTarget": "side",
                                        "queryMode": "local",
                                        "store": "MyArrayStore",
                                        "validateBlank": true,
                                        "value": null,
                                        "valueField": "id",
                                        "width": 300
                                    },
                                    "designerId": "f0930a59-fc36-43cb-af11-85ff3f4ba31f"
                                }
                            ]
                        },
                        {
                            "type": "Ext.container.Container",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "container|align": "stretch",
                                "itemId": "Address",
                                "layout": "vbox",
                                "margin": "7 0 7 0"
                            },
                            "designerId": "7dcb4fd4-a257-4e04-8640-787cf6cc6c50",
                            "cn": [
                                {
                                    "type": "Ext.form.field.Text",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "allowBlank": false,
                                        "fieldLabel": "<b>Address1&nbsp;<span style=\"color:#D94E37;\">*</span></b>",
                                        "inputId": "txtPOPAddress1",
                                        "itemId": "txtPOPAddress1",
                                        "maxWidth": 600,
                                        "vtype": null
                                    },
                                    "designerId": "88312a7c-3335-4c35-8cbe-80879817333e"
                                },
                                {
                                    "type": "Ext.form.field.Text",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fieldLabel": "<b>Address2</b>",
                                        "inputId": "txtPOPAddress2",
                                        "itemId": "txtPOPAddress2",
                                        "maxWidth": 600,
                                        "vtype": null
                                    },
                                    "designerId": "2eadc039-657b-4432-9eb1-d0b28fd7c08e"
                                }
                            ]
                        },
                        {
                            "type": "Ext.container.Container",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "container|align": "stretch",
                                "itemId": "Citystatezip",
                                "layout": "hbox",
                                "margin": "7 0 7 0"
                            },
                            "designerId": "804fb605-5291-43c2-8cc9-4c3ab23a2e3e",
                            "cn": [
                                {
                                    "type": "Ext.form.field.Text",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "allowBlank": false,
                                        "fieldLabel": "<b>City&nbsp;<span style=\"color:#D94E37;\">*</span></b>",
                                        "inputId": "txtPOPCity",
                                        "itemId": "txtPOPCity",
                                        "msgTarget": "side",
                                        "regex": "/^[a-zA-Z\\s]*$/",
                                        "regexText": "Please enter valid city.",
                                        "vtype": null,
                                        "width": 300
                                    },
                                    "designerId": "54e85c74-88c8-46a2-ba1e-c744bffc70f5"
                                },
                                {
                                    "type": "Ext.form.field.ComboBox",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "displayField": "des",
                                        "emptyText": "-Select-",
                                        "fieldLabel": "<b>&nbsp;&nbsp;&nbsp;State&nbsp;<span style=\"color:#D94E37;\">*</span></b>",
                                        "forceSelection": true,
                                        "inputId": "ddlPOPNewPatientState",
                                        "itemId": "ddlPOPState2",
                                        "layout|flex": 1,
                                        "maxWidth": 300,
                                        "queryMode": "local",
                                        "store": "States",
                                        "value": null,
                                        "valueField": "id"
                                    },
                                    "designerId": "1131dd44-27bd-465e-98ed-c32893a39f96"
                                }
                            ]
                        },
                        {
                            "type": "Ext.container.Container",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "container|align": "stretch",
                                "itemId": "PhoneNo",
                                "layout": "hbox",
                                "margin": "7 0 7 0"
                            },
                            "designerId": "d2beabea-4378-4ebf-8bbb-129ebcb42c32",
                            "cn": [
                                {
                                    "type": "Ext.form.field.Text",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "allowBlank": false,
                                        "enforceMaxLength": true,
                                        "fieldLabel": "<b>Zip&nbsp;<span style=\"color:#D94E37;\">*</span></b>",
                                        "id": "txtPOPZipID",
                                        "inputId": "txtPOPZip",
                                        "itemId": "",
                                        "maxLength": 10,
                                        "msgTarget": "side",
                                        "regex": "/(^\\d{5}$)|(^\\d{5}-\\d{4}$)/",
                                        "regexText": "Invalid Zip Code",
                                        "width": 300
                                    },
                                    "designerId": "a09a7adb-f555-4be3-b68c-dc3939215ae1",
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onTxtPOPZipKeypress",
                                                "implHandler": [
                                                    "var phone = Ext.getCmp('txtPOPZipID').getValue();\r",
                                                    "if(phone.length === 6){\r",
                                                    "    var newPhone = phone.concat('-');\r",
                                                    "    Ext.getCmp('txtPOPZipID').setValue(newPhone);\r",
                                                    "}\r",
                                                    "\r",
                                                    ""
                                                ],
                                                "name": "keypress",
                                                "scope": "me"
                                            },
                                            "designerId": "a2333632-269e-4781-89f8-6e06e2612a70"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.form.field.Text",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "allowBlank": false,
                                        "enableKeyEvents": true,
                                        "enforceMaxLength": true,
                                        "fieldLabel": "<b>&nbsp;&nbsp;&nbsp;Phone No.&nbsp;<span style=\"color:#D94E37;\">*</span></b>",
                                        "id": "txtPOPPhoneNoID",
                                        "inputId": "txtPOPPhoneno",
                                        "itemId": "txtPOPPhoneNo",
                                        "maxLength": 12,
                                        "msgTarget": "side",
                                        "regex": "/^(\\([0-9]{3}\\) |[0-9]{3}-)[0-9]{3}-[0-9]{4}$/",
                                        "regexText": "Please enter phone No. in xxx-xxx-xxxx format.",
                                        "width": 300
                                    },
                                    "designerId": "56e4ff89-35a9-44ec-8b63-656d16d3c5ea",
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onTxtPOPPhoneNoIDKeypress",
                                                "implHandler": [
                                                    "var phone = Ext.getCmp('txtPOPPhoneNoID').getValue();\r",
                                                    "if(phone.length === 3 || phone.length === 7){\r",
                                                    "    var newPhone = phone.concat('-');\r",
                                                    "    Ext.getCmp('txtPOPPhoneNoID').setValue(newPhone);\r",
                                                    "}\r",
                                                    "\r",
                                                    ""
                                                ],
                                                "name": "keypress",
                                                "scope": "me"
                                            },
                                            "designerId": "93e6b787-5828-49dd-97e9-593df1b7c26a"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.container.Container",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "container|align": "stretch",
                                "container|pack": "end",
                                "itemId": "Button",
                                "layout": "hbox",
                                "margin": "7 0 7 0",
                                "maxWidth": 600
                            },
                            "designerId": "d3e164b3-24d9-4262-871e-5db00a46ea08",
                            "cn": [
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "cls": "SaveBt",
                                        "designer|displayName": "btnPOPPatientSave",
                                        "formBind": true,
                                        "itemId": "btnPOPPatientSave",
                                        "margin": "0 10 0 0",
                                        "maxWidth": null,
                                        "text": "Save",
                                        "width": 92
                                    },
                                    "designerId": "5dac9d82-761d-41e8-9ae7-ed3b83c10aa4",
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onBtnPOPPatientSaveClick",
                                                "implHandler": [
                                                    "var form = button.up('form');\r",
                                                    "var domain = localStorage.getItem('email');\r",
                                                    "           //var header = button.up('headerPanel');\r",
                                                    "               values = form.getValues();\r",
                                                    " //var popupHICN= ;\r",
                                                    "\r",
                                                    "        // Success\r",
                                                    "        var successCallback = function(resp, ops) {\r",
                                                    "\r",
                                                    "            var HICNresponse = Ext.JSON.decode(resp.responseText);\r",
                                                    "            if(HICNresponse.status === 'ok'){\r",
                                                    "\r",
                                                    "              Ext.Msg.alert(\"Data Inserted\", 'Patient HICN Inserted successfully');\r",
                                                    "\r",
                                                    "\r",
                                                    "                Ext.getCmp('POPHICN').destroy();\r",
                                                    "                localStorage.removeItem(\"new_HICN\"); //remove old items\r",
                                                    "                localStorage.setItem(\"new_HICN\", HICNresponse.HICN);\r",
                                                    "                localStorage.setItem(\"new_HICN_name\", HICNresponse.Name);\r",
                                                    "                var patientHICN =  Ext.getCmp('PatientHICNPOP');\r",
                                                    "                var patientName =  Ext.getCmp('txtPatientName');\r",
                                                    "                patientHICN.setValue(localStorage.getItem('new_HICN'));\r",
                                                    "                patientName.setValue(localStorage.getItem('new_HICN_name'));\r",
                                                    "   // Code to reset the form values\r",
                                                    "            form.getForm().getFields().each(function(f){\r",
                                                    "            f.originalValue=undefined;\r",
                                                    "            });\r",
                                                    "            form.getForm().reset();\r",
                                                    "\r",
                                                    "           }\r",
                                                    "           else if(resp.responseText === 'false'){\r",
                                                    "\r",
                                                    "              Ext.Msg.alert(\"Duplicate Entry\", 'Patient HICN Already Exists');\r",
                                                    "           }\r",
                                                    "            else{\r",
                                                    "              // Show login failure error\r",
                                                    "            Ext.Msg.alert(\"Insert Failure\", 'Data cannot be added');\r",
                                                    "            }\r",
                                                    "\r",
                                                    "        };\r",
                                                    "\r",
                                                    "        // Failure\r",
                                                    "        var failureCallback = function(resp, ops) {\r",
                                                    "\r",
                                                    "            // Show login failure error\r",
                                                    "            //Ext.Msg.alert(\"Login Failure\", 'Incorrect Username or Password');\r",
                                                    "\r",
                                                    "        };\r",
                                                    "\r",
                                                    "\r",
                                                    "        // TODO: Login using server-side authentication service\r",
                                                    "        Ext.Ajax.request({url: \"services/Maintainence.php?action=POPinsertPatientHICN&src=\"+domain,\r",
                                                    "                method: 'POST',\r",
                                                    "                params: values,\r",
                                                    "                success: successCallback,\r",
                                                    "                failure: failureCallback\r",
                                                    "         });"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "designerId": "c0d77b70-3581-402d-96ed-90cd7c434644"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "cls": "BackBt",
                                        "designer|displayName": "btnPOPPatientCancel",
                                        "itemId": "btnPOPPatientCancel",
                                        "margin": null,
                                        "maxWidth": null,
                                        "padding": "",
                                        "text": "Reset",
                                        "width": 92
                                    },
                                    "designerId": "aa81cf44-f606-4ab8-bd19-a296f24058dc",
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onBtnPOPPatientCancelClick",
                                                "implHandler": [
                                                    "   Ext.getCmp('patientPopForm1').getForm().reset(); \r",
                                                    " "
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "designerId": "10a014ce-c6ac-4078-815c-c288bdde98d2"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "basiceventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onPatientPopForm1AfterRender",
                        "implHandler": [
                            "Ext.getCmp('txtPOPDOBID').setMaxValue(Ext.util.Format.date(new Date(), 'm/d/Y'));"
                        ],
                        "name": "afterrender",
                        "scope": "me"
                    },
                    "designerId": "dbdb534a-9e1c-4661-a484-ad8d2c3e1f3d"
                }
            ]
        }
    ]
}